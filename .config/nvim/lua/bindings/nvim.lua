-- =============================================================================
--  __      __________   ______
-- /  \    /  \_____  \ /  __  \
-- \   \/\/   //  ____/ >      <
--  \        //       \/   --   \
--   \__/\  / \_______ \______  /
--        \/          \/      \/
-- nvim.lua --- remaps for neovim
-- Copyright (c) 2021 Sourajyoti Basak
-- Author: Sourajyoti Basak < wiz28@protonmail.com >
-- URL: https://github.com/wizard-28/dotfiles/
-- License: MIT
-- =============================================================================

-- =============================================================================
-- Keeping it centered
-- =============================================================================
wk.register({
	["n"] = { "nzzzv", "Goto next, center screen, unfold" },
	["N"] = { "Nzzzv", "Goto previous, center screen, unfold" },
	["J"] = { "mzJ`z", "Join lines while keeping the cursor in the same position" },
})
-- =============================================================================

-- =============================================================================
-- Undo break points
-- =============================================================================
wk.register({
	["."] = { ".<c-g>u", "Insert . and set undo breakpoint" },
	[","] = { ",<c-g>u", "Insert , and set undo breakpoint" },
	["!"] = { "!<c-g>u", "Insert ! and set undo breakpoint" },
	["?"] = { "?<c-g>u", "Insert ? and set undo breakpoint" },
}, { mode = "i" })
-- =============================================================================

-- =============================================================================
-- Jumplist mutations
-- =============================================================================
cmd("nnoremap <expr> k (v:count > 5 ? \"m'\" . v:count : \"\") . 'k'")
cmd("nnoremap <expr> j (v:count > 5 ? \"m'\" . v:count : \"\") . 'j'")
-- =============================================================================

-- =============================================================================
-- Moving text
-- =============================================================================
wk.register({
	["<a-k>"] = { "<cmd>m '<-2<cr>gv=gv", "Move line up" },
	["<a-j>"] = { "<cmd>m '>+1<cr>gv=gv", "Move line down" },
}, { mode = "v" })

wk.register({
	["<a-j>"] = { "<esc><cmd>m .+1<cr>==i", "Move line down" },
	["<a-k>"] = { "<esc><cmd>m .-2<cr>==i", "Move line up" },
}, { mode = "i" })

wk.register({
	["<leader>k"] = { "<cmd>m .-2<cr>==", "Move line up" },
	["<leader>j"] = { "<cmd>m .+1<cr>==", "Move line down" },
})
-- =============================================================================
